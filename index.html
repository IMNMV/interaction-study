
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Interaction Study</title>
        <link rel="stylesheet" href="static/style.css">
        <link rel="icon" href="data:;base64,iVBORw0KGgo=">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
     </head>
<body>
    <!-- Timer Display - Top Right -->
    <div id="timer-display" style="position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.8); color: white; padding: 10px 15px; border-radius: 5px; font-family: monospace; font-size: 16px; z-index: 1000; display: none;">
        Time: <span id="countdown-timer">20:00</span>
    </div>

    <div class="container">

        <!-- NEW: Consent Form Section -->
        <div id="consent-phase" class="study-phase" style="display: none;">
            <div id="consent-content">
                 <h2 style="text-align: center;">Consent to Participate in Research</h2>
                 <h3 style="text-align: center;">Title of Study: Interaction Study</h3>

                 <h4>About this Study</h4>
                 <p>You are being asked to participate in a research study. This form provides you with information about the study.</p>
 
                 <h4>Purpose of Research</h4>
                 <p>This research examines how people make judgments during conversational interactions and how these judgments change over time.</p>
 
                 <h4>What You Will Be Asked to Do</h4>
                 <p>If you agree to participate, you will:</p>
                 <ul>
                     <li>Engage in a text-based conversation with a conversational partner.</li>
                     <li>After each message exchange, rate your confidence about whether you believe you are talking to a human or an AI using a sliding scale (0 = definitely human, 1 = definitely AI).</li>
                     <li>Optionally provide brief comments about your experience during the conversation.</li>
                     <li>Complete a brief demographic questionnaire at the beginning.</li>
                     <li>The total time commitment will be approximately 20 minutes.</li>
                     <li>You are free to share information as you see fit during the conversation but should not share more than you would be willing to share with a stranger.</li>
                 </ul>
 
                 <h4>Your Rights as a Participant</h4>
                 <ul>
                     <li>Your participation is voluntary.</li>
                     <li>You may stop at any time.</li>
                     <li>You may choose not to answer any question.</li>
                     <li>You may not be told everything about the purpose of this research study initially, but you will be fully informed after completion.</li>
                 </ul>
 
                 <h4>Risks and Benefits</h4>
                 <ul>
                     <li>There are no known risks associated with participating in this study beyond those encountered in normal daily conversation.</li>
                     <li>While there are no direct benefits to you, your participation helps advance our understanding of human-AI interaction and judgment processes.</li>
                 </ul>

                 <h4>Compensation</h4>
                 <ul>
                    <li>You will receive compensation equivalent to $8.00 per hour for your participation through the online platform.</li>
                 </ul>
 
                 <h4>Confidentiality</h4>
                 <ul>
                    <li>Your responses will be stored securely.</li>
                    <li>Data will be analyzed without any identifying information.</li>
                    <li>Only researchers will have access to the data.</li>
                    <li>Anonymized results derived from your data may be shared in OpenScience frameworks for transparency of our research progress.</li>
                    <li>Any personally identifying information you may share during conversations will be removed from analyses and will not be used in research outputs.</li>
                    <li>Analyses (quantitative and qualitative) will be carried out on any text you write during the study.</li>
                 </ul>

                 <h4>Questions or Concerns?</h4>
                 <ul>
                    <li>For questions about the research: Contact the Principal Investigator at nvitali@fas.harvard.edu</li>
                    <li>For questions about your rights as a participant: Contact cuhs@harvard.edu</li>
                 </ul>
                 
                 <h4>Agreement to Participate</h4>
                 <p>By clicking "I agree" below, you indicate that:</p>
                 <ul>
                    <li>You are at least 18 years old.</li>
                    <li>You have read and understood this consent form.</li>
                    <li>You voluntarily agree to participate.</li>
                    <li>You understand you can withdraw at any time.</li>
                 </ul>
            </div>
            
            <div id="consent-actions">
                 <button id="agree-button">I agree to participate</button>
                 <button id="disagree-button" style="background-color: #dc3545;">I do not agree</button>
            </div>
 
            <div id="consent-download-prompt" style="display: none; text-align: center; margin-top: 30px;">
                 <p>Thank you for agreeing to participate. Would you like to download a copy of the consent form for your records?</p>
                 <button id="download-consent-button">Download Consent Form</button>
                 <button id="skip-consent-download-button">Continue Without Downloading</button>
            </div>
        </div>


        <div id="instructions-phase" class="study-phase" style="display: none;">
            <h2>Welcome to the Interaction Study</h2>
            <p>
                In this study, you'll be having a conversation. <strong>Your task is to determine whether you're talking to an AI or a human. If your partner is an AI it has been instructed to be as human as possible. Likewise, if your partner is human they have also been instructed to act as human as possible.</strong>
            <p>
                Please assume AI means Large Language Model (LLM), such as ChatGPT.
            <p>
            <p>
                On the next page you will complete a brief form and then randomly assigned to either send the first message or receive the first message.
                After that you will be shown a conversation box where you can chat back and forth with your partner.
                Your conversation partner knows they're being evaluated and is trying to appear as human-like as possible. You can talk about anything you would like to make your decision.
            <p>
                <strong><em>You are free to share information as you see fit during the conversation but should not share more than you would be willing to share with a stranger.</em></strong>
            </p>
            <p>
                During the conversation, after each message exchange, a slider will appear below the chat box where you can indicate how confident you are that you're talking to an AI or a human.
            <p>
            <p>
                <strong><em>Consider what kinds of messages may clue you in to if your conversational partner is an AI or a human. Then, evaluate each message sent by your conversation partner as evidence towards your judgment for that turn.</em></strong>
            </p>

                You can adjust this slider as many times as you want after each message before you submit your rating, but once you submit your rating you will not be able to change it again for that turn.
            <p>
            </p>
            <button id="confirm-instructions-button">I Understand, Continue</button>
        </div>

    <div id="initial-setup" class="study-phase">

            <form id="initial-form">
                <!-- AI Experience Section -->
                <label>How often do you use AI chatbots (ChatGPT, Claude, Gemini, etc.)?</label>
                <select name="ai_usage_frequency" required>
                    <option value="" disabled selected>Select...</option>
                    <option value="0">Never</option>
                    <option value="1">A few times ever</option>
                    <option value="2">Monthly</option>
                    <option value="3">Weekly</option>
                    <option value="4">Daily</option>
                    <option value="5">Multiple times daily</option>
                </select>

                <label>Which AI models have you used? (check all that apply)</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="ai_models_used" value="chatgpt"> ChatGPT</label>
                    <label><input type="checkbox" name="ai_models_used" value="claude"> Claude</label>
                    <label><input type="checkbox" name="ai_models_used" value="gemini"> Gemini</label>
                    <label><input type="checkbox" name="ai_models_used" value="perplexity"> Perplexity</label>
                    <label><input type="checkbox" name="ai_models_used" value="grok"> Grok</label>
                    <label><input type="checkbox" name="ai_models_used" value="other"> Other</label>
                </div>

                <label>If you received a text from a number you didn't know, how quickly do you think you'd be able to tell if it was an AI or human?</label>
                <div class="likert-bubble-group">
                    <button type="button" class="likert-bubble" data-name="self_detection_speed" data-value="1">Immediately (1-2 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="self_detection_speed" data-value="2">Very quickly (3-5 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="self_detection_speed" data-value="3">Fairly quickly (6-10 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="self_detection_speed" data-value="4">After some convo (11-20 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="self_detection_speed" data-value="5">After extended convo (20+ msgs)</button>
                    <button type="button" class="likert-bubble" data-name="self_detection_speed" data-value="6">Couldn't tell</button>
                </div>
                <input type="hidden" name="self_detection_speed" value="">

                <label>If the average person received a text message from an unknown number, how quickly do you think they'd be able to tell if it was sent by an AI or a human?</label>
                <div class="likert-bubble-group">
                    <button type="button" class="likert-bubble" data-name="others_detection_speed" data-value="1">Immediately (1-2 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="others_detection_speed" data-value="2">Very quickly (3-5 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="others_detection_speed" data-value="3">Fairly quickly (6-10 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="others_detection_speed" data-value="4">After some convo (11-20 msgs)</button>
                    <button type="button" class="likert-bubble" data-name="others_detection_speed" data-value="5">After extended convo (20+ msgs)</button>
                    <button type="button" class="likert-bubble" data-name="others_detection_speed" data-value="6">Couldn't tell</button>
                </div>
                <input type="hidden" name="others_detection_speed" value="">

                <label>How would you rate the current capabilities of AI chatbots?</label>
                <div class="likert-bubble-group">
                    <button type="button" class="likert-bubble" data-name="ai_capabilities_rating" data-value="1">Not at all Capable</button>
                    <button type="button" class="likert-bubble" data-name="ai_capabilities_rating" data-value="2">Slightly Capable</button>
                    <button type="button" class="likert-bubble" data-name="ai_capabilities_rating" data-value="3">Somewhat Capable</button>
                    <button type="button" class="likert-bubble" data-name="ai_capabilities_rating" data-value="4">Moderately Capable</button>
                    <button type="button" class="likert-bubble" data-name="ai_capabilities_rating" data-value="5">Quite Capable</button>
                    <button type="button" class="likert-bubble" data-name="ai_capabilities_rating" data-value="6">Very Capable</button>
                    <button type="button" class="likert-bubble" data-name="ai_capabilities_rating" data-value="7">Extremely Capable</button>
                </div>
                <input type="hidden" name="ai_capabilities_rating" value="">

                <label>How much do you generally trust AI systems?</label>
                <div class="likert-bubble-group">
                    <button type="button" class="likert-bubble" data-name="trust_in_ai" data-value="1">Not at all Trusting</button>
                    <button type="button" class="likert-bubble" data-name="trust_in_ai" data-value="2">Slightly Trusting</button>
                    <button type="button" class="likert-bubble" data-name="trust_in_ai" data-value="3">Somewhat Trusting</button>
                    <button type="button" class="likert-bubble" data-name="trust_in_ai" data-value="4">Moderately Trusting</button>
                    <button type="button" class="likert-bubble" data-name="trust_in_ai" data-value="5">Quite Trusting</button>
                    <button type="button" class="likert-bubble" data-name="trust_in_ai" data-value="6">Very Trusting</button>
                    <button type="button" class="likert-bubble" data-name="trust_in_ai" data-value="7">Extremely Trusting</button>
                </div>
                <input type="hidden" name="trust_in_ai" value="">

                <!-- Demographics -->
                <label>Age:</label>
                <input type="number" name="age" min="18" max="100" required>

                <label>Gender:</label>
                <select name="gender" required>
                    <option value="" disabled selected>Select...</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="non_binary">Non-binary</option>
                    <option value="prefer_not_say">Prefer not to say</option>
                    <option value="other">Other</option>
                </select>

                <label>Highest level of education completed:</label>
                <select name="education" required>
                    <option value="" disabled selected>Select...</option>
                    <option value="less_than_high_school">Less than high school</option>
                    <option value="high_school">High school diploma/GED</option>
                    <option value="some_college">Some college</option>
                    <option value="associates">Associate's degree</option>
                    <option value="bachelors">Bachelor's degree</option>
                    <option value="masters">Master's degree</option>
                    <option value="doctorate">Doctoral/Professional degree</option>
                </select>

                <label>Ethnicity (check all that apply):</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="ethnicity" value="white"> White/Caucasian</label>
                    <label><input type="checkbox" name="ethnicity" value="black"> Black/African American</label>
                    <label><input type="checkbox" name="ethnicity" value="hispanic"> Hispanic/Latino</label>
                    <label><input type="checkbox" name="ethnicity" value="asian"> Asian</label>
                    <label><input type="checkbox" name="ethnicity" value="native_american"> Native American/Alaska Native</label>
                    <label><input type="checkbox" name="ethnicity" value="pacific_islander"> Native Hawaiian/Pacific Islander</label>
                    <label><input type="checkbox" name="ethnicity" value="middle_eastern"> Middle Eastern/North African</label>
                    <label><input type="checkbox" name="ethnicity" value="other"> Other</label>
                    <label><input type="checkbox" name="ethnicity" value="prefer_not_say"> Prefer not to say</label>
                </div>

                <label>Annual household income:</label>
                <select name="income" required>
                    <option value="" disabled selected>Select...</option>
                    <option value="under_25k">Under $25,000</option>
                    <option value="25k_50k">$25,000 - $49,999</option>
                    <option value="50k_75k">$50,000 - $74,999</option>
                    <option value="75k_100k">$75,000 - $99,999</option>
                    <option value="100k_150k">$100,000 - $149,999</option>
                    <option value="150k_plus">$150,000 or more</option>
                    <option value="prefer_not_say">Prefer not to say</option>
                </select>

                <button type="submit">Begin Conversation</button>
            </form>
            <div id="init-loading" class="loading-message" style="display: none;">
                <div id="progress-bar-container">
                    <div id="progress-bar"></div>
                </div>
                <span>Finding and connecting with a partner please wait... This might take a moment.</span>
            </div>
        </div>

       <!-- Chat Interface is now the main container for conversation and assessment -->
       <div id="chat-interface" class="study-phase" style="display: none;">
           <h3>Conversation</h3>
           <div class="chat-window">
               <div id="message-list">
                   <!-- Messages will be appended here -->
               </div>
               <div id="typing-indicator" style="display: none;">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
           </div>

           <!-- Assessment Area is NOW INSIDE chat-interface -->
           <!-- It will be shown/hidden as needed -->
           <div id="assessment-area" style="display: none; margin-top:15px; padding-top:15px; border-top: 1px solid #eee;">
            <h4>Your Assessment</h4>
            <label for="confidence-slider">How confident are you that you're talking to an AI? (0 = Definitely Human, .5 = Unsure, 1 = Definitely AI)</label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.01" value="0.5">
            <div class="slider-labels">
                <span class="label-left">Human</span>
                <span class="label-center">Unsure</span>
                <span class="label-right">AI</span>
            </div>
            <span id="confidence-value">0.50</span>
            <button id="submit-rating-button">Submit Rating</button>
            <div id="rating-loading" class="loading-message" style="display: none;">Submitting rating...</div>

            <div id="comment-section" style="display: none; margin-top: 20px;">
                <label for="feels-off-checkbox">Include a comment about this turn?</label>
                <input type="checkbox" id="feels-off-checkbox">
                <div id="comment-input-area" style="display: none;">
                    <textarea id="feels-off-comment" placeholder="Your comment..."></textarea>
                    <button id="submit-comment-button">Submit Comment</button>
                    <div id="comment-loading" class="loading-message" style="display: none;">Submitting comment...</div>
                </div>
            </div>
        </div>

        <!-- Chat Input Area will be hidden when assessment is active -->
        <div id="chat-input-container" class="chat-input-area">
            <input type="text" id="user-message-input" placeholder="Type your message here...">
            <button id="send-message-button">Send</button>
        </div>
    </div>
    <div id="feedback-phase" class="study-phase" style="display: none;">
        <h2>Share Your Experience</h2>
        <p>Before we conclude, we would appreciate any feedback you have about the conversation. Please share anything you noticed. This is optional and will not affect your compensation.</p>
        <textarea id="feedback-textarea" placeholder="Your thoughts..." rows="6" style="width: 100%; box-sizing: border-box;"></textarea>
        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
            <button id="submit-feedback-button">Submit Feedback</button>
            <button id="skip-feedback-button" style="background-color: #6c757d;">Skip</button>
        </div>
    </div>
       <div id="final-page" class="study-phase" style="display: none;">
           <div id="debrief-phase">
               <div id="debrief-section" style="text-align: left;">
                   <h2 style="text-align: center">Study Debrief Form</h2>
                   <p>Now that you have completed the study, we would like to explain its purpose in more detail.</p>
                   <h3>Purpose of the Research</h3>
                   <p>This study examines "psychological tactics" in human-AI interaction. We are investigating whether an AI can appear more human-like by using specific conversational strategies, such as mimicking user behavior, using humor, or expressing mild opinions.</p>
                   <h3>Why We Did Not Tell You Everything Initially</h3>
                   <p>To get a natural assessment of your interaction, we could not tell you beforehand that the AI might be using specific tactics. Knowing this could have biased your judgments and conversation style. You were correctly told your task was to determine if you were talking to an AI or a human.</p>
                   <h3>The Complete Picture</h3>
                   <p>You were randomly assigned to interact with an AI using one of two personas: a "control" persona with neutral responses, or an "experimental" persona that actively used psychological tactics based on your initial survey answers and the flow of the conversation. By comparing confidence ratings and final decisions between these groups, we can understand which strategies, if any, make an AI more convincing.</p>
                   <h3>Use of Your Data</h3>
                   <p>If you are comfortable with us using your anonymized responses now that you know the full purpose of the study, you don't need to do anything. If you would prefer that we not use your responses, please contact the research team and we will delete your data.</p>
               </div>
               <div id="debrief-actions" style="text-align: center; margin-top: 20px;">
                   <button id="download-debrief-button">Download Debrief Form</button>
                   <button id="continue-after-debrief-button">Continue</button>
               </div>
           </div>

           <div id="summary-phase" style="display: none;">
               <h2>Thank you for participating!</h2>
               <p id="final-decision-text"></p>
               <p id="final-decision-time-text"></p>
               <div id="confidence-trend-chart">
                   <h4>Confidence Trend (0=Human, 1=AI)</h4>
                   <pre id="confidence-trend-data"></pre>
               </div>
               <button id="new-session-button">Start New Session</button>
               <div id="researcher-data-section" style="display: none; margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px;">
                   <h3>Researcher Data (Debug View)</h3>
                   <button id="load-researcher-data-button">Load Full Researcher Data</button>
                   <pre id="researcher-data-content" style="white-space: pre-wrap; word-wrap: break-word; max-height: 400px; overflow-y: auto; background-color: #f0f0f0; padding:10px;"></pre>
               </div>
           </div>
       </div>
        <div id="error-message-area" class="error-message" style="display:none;"></div>
   </div>

   <div id="demographics-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <p>Before we begin you will fill out a demographics questionnaire to better understand your experiences with AI, as well as basic information about you.</p>
            <button id="modal-continue-button">I Understand, Continue</button>
        </div>
    </div>

    <div id="final-instructions-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <p>In a moment you will see a conversation box. Your job is to decide if your conversational partner is a human, or an AI.</p>
            <p><em>Remember, if your partner is an AI it has been instructed to be as human as possible. Likewise, if your partner is human they have also been instructed to act as human as possible. Consider what kinds of messages may clue you in to if your conversational partner is an AI or a human.
                you should consider each message sent by your conversation partner as evidence towards your judgment for that turn. You are free to chat as you would like.</em></p>

            <p class="emphasis-line"><strong>You have been randomly selected to send the first message.</strong></p>
            <p>After you send a message, your partner will respond and then a slider will appear. Sliding it to the left means you're more sure your partner is a human, sliding it to the right means more sure they're an AI. A value of .5 means unsure.</p>
            <p><strong>Only select a value of 0 (human) or 1 (AI) if you are ABSOLUTELY SURE your partner is a human or AI.</p><strong>
            <p>You will chat with your partner for the full 20 minutes, even if you select 0 or 1 before the 20 minutes is up. At the 20 minute mark you will make a final determination where you will be forced to choose either 0 or 1.</p>
            <button id="final-instructions-button">I understand</button>
        </div>
    </div>

   <script src="static/script.js"></script>
</body>
</html>

